# 数据库设计

## 数据库设计

> 关系型数据库设计：三大范式的通俗理解

**首先介绍下多表之间的关系**

1. 多表之间的关系
2. 分类：

```java
1. 多表之间的关系
1. 分类：
	1. 一对一(了解)：
		* 如：人和身份证
		* 分析：一个人只有一个身份证，一个身份证只能对应一个人
	2. 一对多(多对一)：
		* 如：部门和员工
		* 分析：一个部门有多个员工，一个员工只能对应一个部门
	3. 多对多：
		* 如：学生和课程
		* 分析：一个学生可以选择很多门课程，一个课程也可以被很多学生选择
2. 实现关系：
	1. 一对多(多对一)：
		* 如：部门和员工
		* 实现方式：在多的一方建立外键，指向一的一方的主键。
	2. 多对多：
		* 如：学生和课程
		* 实现方式：多对多关系实现需要借助第三张中间表。中间表至少包含两个字段，这两个字段作为第三张表的外键，分别指向两张表的主键
	3. 一对一(了解)：
		* 如：人和身份证
		* 实现方式：一对一关系实现，可以在任意一方添加唯一外键指	向另一方的主键。
```



> 一对一的关系

![img](https://img-blog.csdnimg.cn/20191206105404396.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzM3OTg5OTgw,size_16,color_FFFFFF,t_70)

> 一对多的关系

![img](https://img-blog.csdnimg.cn/20191206105501226.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzM3OTg5OTgw,size_16,color_FFFFFF,t_70)

> 多对多的关系

![img](https://img-blog.csdnimg.cn/2019120610553168.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzM3OTg5OTgw,size_16,color_FFFFFF,t_70)

## 数据库三大范式

```java
* 概念：设计数据库时，需要遵循的一些规范。要遵循后边的范式要求，必须先遵循前边的所有范式要求

	设计关系数据库时，遵从不同的规范要求，设计出合理的关系型数据库，这些不同的规范要求被称为不同的范式，各种范式呈递次规范，越高的范式数据库冗余越小。
	目前关系数据库有六种范式：第一范式（1NF）、第二范式（2NF）、第三范式（3NF）、巴斯-科德范式（BCNF）、第四范式(4NF）和第五范式（5NF，又称完美范式）。
	* 分类：
	1. 第一范式（1NF）：每一列都是不可分割的原子数据项
	2. 第二范式（2NF）：在1NF的基础上，非码属性必须完全依赖于码（在1NF基础上消除非主属性对主码的部分函数依赖）
	3. 第三范式（3NF）：在2NF基础上，任何非主属性不依赖于其它非主属性（在2NF基础上消除传递依赖）

	* 几个概念：
			1. 函数依赖：A-->B,如果通过A属性(属性组)的值，可以确定唯一B属性的值。则称B依赖于A
				例如：学号-->姓名。  （学号，课程名称） --> 分数
				
			2. 完全函数依赖：A-->B， 如果A是一个属性组，则B属性值得确定需要依赖于A属性组中所有的属性值。
				例如：（学号，课程名称） --> 分数
				
			3. 部分函数依赖：A-->B， 如果A是一个属性组，则B属性值得确定只需要依赖于A属性组中某一些值即可。
				例如：（学号，课程名称） -- > 姓名
				
			4. 传递函数依赖：A-->B, B -- >C . 如果通过A属性(属性组)的值，可以确定唯一B属性的值，在通过B属性（属性组）的值可以确定唯一C属性的值，则称 C 传递函数依赖于A
				例如：学号-->系名，系名-->系主任
				
			5. 码：如果在一张表中，一个属性或属性组，被其他所有属性所完全依赖，则称这个属性(属性组)为该表的码
				例如：该表中码为：（学号，课程名称）

				* 候选码：关系中存在多个属性或属性组都能唯一标识该关系的元组(一行数据),这些属性或属性组就成为该关系的候选键或候选码.
				* 主码：在一个关系的若干候选码中指定一个用来标识该关系的元组,这个被指定的候选码称为主关键字,称为主键或主码. 每个关系都有且只有一个主键,通常用较小的属性组作为主键.
				* 主属性：包含在任何一个候选码中的属性称为主属性
				* 非主属性：不包含在任何一个候选码中的属性称为非主属性
```

举例:

![img](https://img-blog.csdnimg.cn/2019120611093182.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzM3OTg5OTgw,size_16,color_FFFFFF,t_70)


	第一范式（1NF）：每一列都是不可分割的原子数据项, 明细这个表不符合第一范式.
>
> 明显不符合第一范式,因为系可以分为系名和系主任.

![img](https://img-blog.csdnimg.cn/20191206111305346.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzM3OTg5OTgw,size_16,color_FFFFFF,t_70)

**拆分后存在的问题**：

1.存在非常严重的数据冗余(重复)：姓名、系名、系主任
2.数据添加存在问题：添加新开设的系和系主任时，数据不合法
3.数据删除存在问题：张无忌同学毕业了，删除数据，会将系的数据一起删除。

```java
第二范式（2NF）：在1NF的基础上，非码属性必须完全依赖于码（在1NF基础上消除非主属性对主码的部分函数依赖）
```

![img](https://img-blog.csdnimg.cn/20191206111849712.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzM3OTg5OTgw,size_16,color_FFFFFF,t_70)

**存在的问题**：

2.数据添加存在问题：添加新开设的系和系主任时，数据不合法
3.数据删除存在问题：张无忌同学毕业了，删除数据，会将系的数据一起删除。

```java
第三范式（3NF）：在2NF基础上，任何非主属性不依赖于其它非主属性（在2NF基础上消除传递依赖

```

> ​	作者做笔记不容易，请评个分吧！

- 1、如果觉得文章写行不错就点个 **赞**。✌
- 2、如果觉得写得好就 **一键三连**！✌✌✌
- 3、如果文章对你很有帮助，请 **打赏**。 💃💃💃💃💃